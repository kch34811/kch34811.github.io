<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>이미지 앨범 (버튼+스와이프, 오토플레이, 순환)</title>
  <style>
    :root {
      --btn-size: 44px;
      --radius: 14px;
      --shadow: 0 8px 24px rgba(0,0,0,.12);
    }
    * { box-sizing: border-box; }
    body { margin: 0; background:#fafafa; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans", "맑은 고딕", sans-serif; }

    /* ---- Gallery ---- */
    .gallery { position: relative; max-width: 900px; margin: 24px auto; border-radius: var(--radius); overflow: hidden; background:#fff; box-shadow: var(--shadow); }
    .viewport { width: 100%; aspect-ratio: 4/3; overflow: hidden; background:#f3f4f6; touch-action: pan-y; }
    .track { display:flex; height:100%; width:100%; transition: transform .36s ease; will-change: transform; }
    .slide { flex:0 0 100%; height:100%; }
    .slide img { width:100%; height:100%; object-fit:cover; display:block; background:#e5e7eb; }

    /* arrows (always visible) */
    .nav { position:absolute; top:50%; transform:translateY(-50%); width:var(--btn-size); height:var(--btn-size); display:grid; place-items:center; border-radius:999px; background:rgba(255,255,255,.92); border:1px solid rgba(0,0,0,.08); box-shadow:var(--shadow); cursor:pointer; user-select:none; font-weight:700; }
    .nav:active { transform: translateY(-50%) scale(.98); }
    .prev { left:12px; }
    .next { right:12px; }
  </style>
</head>
<body>
  <div class="gallery" aria-label="이미지 앨범">
    <div class="viewport" id="viewport">
      <div class="track" id="track">
        <!-- 이미지들: 원하는 URL로 교체하세요 -->
        <div class="slide"><img src="https://picsum.photos/id/100/1200/900" alt="1"></div>
        <div class="slide"><img src="https://picsum.photos/id/101/1200/900" alt="2"></div>
        <div class="slide"><img src="https://picsum.photos/id/102/1200/900" alt="3"></div>
        <div class="slide"><img src="https://picsum.photos/id/103/1200/900" alt="4"></div>
      </div>
      <button class="nav prev" id="prevBtn" aria-label="이전">‹</button>
      <button class="nav next" id="nextBtn" aria-label="다음">›</button>
    </div>
  </div>

  <script>
    (function(){
      const track = document.getElementById('track');
      const slides = Array.from(track.children);
      const total = slides.length;
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const viewport = document.getElementById('viewport');

      let index = 0; // 현재 인덱스

      // 스냅 이동 (항상 한 장 단위)
      function snapTo(i, animate=true){
        track.style.transition = animate ? 'transform .36s ease' : 'none';
        track.style.transform = `translateX(${-i*100}%)`;
      }

      function normalize(i){ return (i % total + total) % total; }
      function go(i){ index = normalize(i); snapTo(index, true); }
      function next(){ go(index + 1); }
      function prev(){ go(index - 1); }

      // 버튼
      prevBtn.addEventListener('click', () => { pauseAutoplay(); prev(); resumeAutoplaySoon(); });
      nextBtn.addEventListener('click', () => { pauseAutoplay(); next(); resumeAutoplaySoon(); });

      // 터치 스와이프
      let dragging=false, startX=0, curX=0, t0=0;
      const THRESH=40; // px
      function onStart(x){ dragging=true; startX=curX=x; t0=Date.now(); track.style.transition='none'; }
      function onMove(x){ if(!dragging) return; curX=x; const w=viewport.getBoundingClientRect().width; const dx=curX-startX; const base=-index*100; let percent=(dx/w)*100; // 시각적 저항감
        if ((index===0 && percent>0) || (index===total-1 && percent<0)) percent*=0.35;
        track.style.transform = `translateX(${base+percent}%)`; }
      function onEnd(){ if(!dragging) return; dragging=false; const dx=curX-startX; const fast = Math.abs(dx)>10 && (Date.now()-t0)<180; if (dx<=-THRESH || (fast && dx<0)) next(); else if (dx>=THRESH || (fast && dx>0)) prev(); else snapTo(index,true); resumeAutoplaySoon(); }

      viewport.addEventListener('touchstart', e=>onStart(e.touches[0].clientX), {passive:true});
      viewport.addEventListener('touchmove',  e=>onMove(e.touches[0].clientX), {passive:true});
      viewport.addEventListener('touchend',   onEnd);
      viewport.addEventListener('touchcancel',onEnd);

      // 리사이즈 시 중간 걸침 방지
      window.addEventListener('resize', ()=>snapTo(index,false));

      // 오토플레이(2초, 무한 순환)
      const INTERVAL=2000; let timer=null, resumeTimer=null;
      function tick(){ next(); }
      function startAutoplay(){ stopAutoplay(); timer=setInterval(tick, INTERVAL); }
      function stopAutoplay(){ clearInterval(timer); timer=null; }
      function pauseAutoplay(){ stopAutoplay(); clearTimeout(resumeTimer); }
      function resumeAutoplaySoon(){ clearTimeout(resumeTimer); resumeTimer=setTimeout(startAutoplay, 1200); }

      // 초기 렌더
      snapTo(index,false);
      startAutoplay();
    })();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>이미지 앨범 (버튼+스와이프, 오토플레이, 순환)</title>
  <style>
    :root {
      --btn-size: 44px;
      --radius: 14px;
      --shadow: 0 8px 24px rgba(0,0,0,.12);
    }
    * { box-sizing: border-box; }
    body { margin: 0; background:#fafafa; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans", "맑은 고딕", sans-serif; }

    /* ---- Gallery ---- */
    .gallery { position: relative; max-width: 900px; margin: 24px auto; border-radius: var(--radius); overflow: hidden; background:#fff; box-shadow: var(--shadow); }
    .viewport { width: 100%; aspect-ratio: 4/3; overflow: hidden; background:#f3f4f6; touch-action: pan-y; }
    .track { display:flex; height:100%; width:100%; transition: transform .36s ease; will-change: transform; }
    .slide { flex:0 0 100%; height:100%; }
    .slide img { width:100%; height:100%; object-fit:cover; display:block; background:#e5e7eb; }

    /* arrows (always visible) */
    .nav { position:absolute; top:50%; transform:translateY(-50%); width:var(--btn-size); height:var(--btn-size); display:grid; place-items:center; border-radius:999px; background:rgba(255,255,255,.92); border:1px solid rgba(0,0,0,.08); box-shadow:var(--shadow); cursor:pointer; user-select:none; font-weight:700; }
    .nav:active { transform: translateY(-50%) scale(.98); }
    .prev { left:12px; }
    .next { right:12px; }
  </style>
</head>
<body>
  <div class="gallery" aria-label="이미지 앨범">
    <div class="viewport" id="viewport">
      <div class="track" id="track">
        <!-- 이미지들: 원하는 URL로 교체하세요 -->
        <div class="slide"><img src="https://picsum.photos/id/100/1200/900" alt="1"></div>
        <div class="slide"><img src="https://picsum.photos/id/101/1200/900" alt="2"></div>
        <div class="slide"><img src="https://picsum.photos/id/102/1200/900" alt="3"></div>
        <div class="slide"><img src="https://picsum.photos/id/103/1200/900" alt="4"></div>
      </div>
      <button class="nav prev" id="prevBtn" aria-label="이전">‹</button>
      <button class="nav next" id="nextBtn" aria-label="다음">›</button>
    </div>
  </div>

  <script>
    (function(){
      const track = document.getElementById('track');
      const slides = Array.from(track.children);
      const total = slides.length;
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const viewport = document.getElementById('viewport');

      let index = 0; // 현재 인덱스

      // 스냅 이동 (항상 한 장 단위)
      function snapTo(i, animate=true){
        track.style.transition = animate ? 'transform .36s ease' : 'none';
        track.style.transform = `translateX(${-i*100}%)`;
      }

      function normalize(i){ return (i % total + total) % total; }
      function go(i){ index = normalize(i); snapTo(index, true); }
      function next(){ go(index + 1); }
      function prev(){ go(index - 1); }

      // 버튼
      prevBtn.addEventListener('click', () => { pauseAutoplay(); prev(); resumeAutoplaySoon(); });
      nextBtn.addEventListener('click', () => { pauseAutoplay(); next(); resumeAutoplaySoon(); });

      // 터치 스와이프
      let dragging=false, startX=0, curX=0, t0=0;
      const THRESH=40; // px
      function onStart(x){ dragging=true; startX=curX=x; t0=Date.now(); track.style.transition='none'; }
      function onMove(x){ if(!dragging) return; curX=x; const w=viewport.getBoundingClientRect().width; const dx=curX-startX; const base=-index*100; let percent=(dx/w)*100; // 시각적 저항감
        if ((index===0 && percent>0) || (index===total-1 && percent<0)) percent*=0.35;
        track.style.transform = `translateX(${base+percent}%)`; }
      function onEnd(){ if(!dragging) return; dragging=false; const dx=curX-startX; const fast = Math.abs(dx)>10 && (Date.now()-t0)<180; if (dx<=-THRESH || (fast && dx<0)) next(); else if (dx>=THRESH || (fast && dx>0)) prev(); else snapTo(index,true); resumeAutoplaySoon(); }

      viewport.addEventListener('touchstart', e=>onStart(e.touches[0].clientX), {passive:true});
      viewport.addEventListener('touchmove',  e=>onMove(e.touches[0].clientX), {passive:true});
      viewport.addEventListener('touchend',   onEnd);
      viewport.addEventListener('touchcancel',onEnd);

      // 리사이즈 시 중간 걸침 방지
      window.addEventListener('resize', ()=>snapTo(index,false));

      // 오토플레이(2초, 무한 순환)
      const INTERVAL=2000; let timer=null, resumeTimer=null;
      function tick(){ next(); }
      function startAutoplay(){ stopAutoplay(); timer=setInterval(tick, INTERVAL); }
      function stopAutoplay(){ clearInterval(timer); timer=null; }
      function pauseAutoplay(){ stopAutoplay(); clearTimeout(resumeTimer); }
      function resumeAutoplaySoon(){ clearTimeout(resumeTimer); resumeTimer=setTimeout(startAutoplay, 1200); }

      // 초기 렌더
      snapTo(index,false);
      startAutoplay();
    })();
  </script>
</body>
</html>
